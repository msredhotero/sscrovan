<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda</title>
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/animate.css">
    <link href="../assets/css/hover.css" rel="stylesheet">  
    <link href="../assets/css/imagehover.min.css" rel="stylesheet">    

    <style type="text/css">
    .tituloA {
      color:#FFA917; 
      border-bottom: 2px solid #FFA917;

    }

    .tituloA:after {
      display: inline-block;
      width: 100%;

    }

    .scale__container--js {
      text-align: center;
      margin-bottom: 35px;
    }
    .scale--js {
      display: inline-block;
      transform-origin: 50% 0;
      -webkit-font-smoothing: antialiased;
      transform: translate3d( 0, 0, 0);
    }
    .btn-crovan {
        color: #fff;
        background-color: #ff8601;
        border-top: 1px solid #fe8c0e;
        border-left: 1px solid #f48102;
        border-bottom: 1px solid #f48102;
        border-right: 1px solid #fe8c0e;
        padding: 10px 40px;
        font-weight: 600;
    }
        .help-blok {
            color: red;
            font-size: 10px;
        }
    </style>
</head>

<body>
<div class="row" id="barraup">
<nav class="navbar navbar-default">
<div class="col-xs-3">
    <div class="col-xs-12">
        <img src="../assets/img/logonav.png" class="img-responsive pull-right imgnavbar">
    </div>
</div>
<div class="col-xs-4">
    
</div>
<div class="col-xs-5">
    <div class="col-xs-12 mp-navbar">¿YA ESTAS REGISTRADO? <a href="../login/" style="color:#00F;">INGRESA ACA</a> <img src="../assets/img/iniciarsesion.png"></div>
</div>
</nav>
</div>
    <div class="row">
        <div class="col-xs-12">
            <ul class="nav nav-pills nav-justified">
                <div class="col-xs-1">
                </div>
                <div class="col-xs-11">
                    <li class="dropdown"><h3 style="margin-top:-5px;">REGISTRATE EN CROVAN KEGS</h3></a></li>                
                </div>                         
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3">
            
        </div>
        <div class="col-xs-6" style="margin-top:20px;">

            <form>
                <div class="scale__container--js">
                    <h4 class="scale--js tituloA">COMPLETA EL FORMULARIO CON TUS DATOS Y HACE TUS COMPRAS</h4>
                </div>
                <div id="camposForm">
              <div class="form-group">
                
                <input type="email" class="form-control" id="txtEmail" aria-describedby="emailHelp" placeholder="E-MAIL">
                <div class="help-blok">* Campo obligatorio</div>
              </div>
              <div class="form-group">
                
                <input type="password" class="form-control" id="txtPassword" aria-describedby="emailHelp" placeholder="CONTRASEÑA">
                <div class="help-blok">* Campo obligatorio <span id="errorP"></span></div>
              </div>

              <div class="form-group">
                
                <input type="password" class="form-control" id="txtPassword2" aria-describedby="emailHelp" placeholder="CONTRASEÑA DE NUEVO">
                <div class="help-blok">* Campo obligatorio <span id="errorP2"></span></div>
              </div>

              <div class="form-group">
                
                <input type="text" class="form-control" id="txtNombre" aria-describedby="emailHelp" placeholder="NOMBRE">
                <div class="help-blok">* Campo obligatorio</div>
              </div>

              <div class="form-group">
                
                <input type="text" class="form-control" id="txtApellido" aria-describedby="emailHelp" placeholder="APELLIDO">
                <div class="help-blok">* Campo obligatorio</div>
              </div>


                <div class="form-group">
                
                <input type="text" class="form-control" id="txtTelefono" aria-describedby="emailHelp" placeholder="TELEFONO">
              </div>
              </div>
              <div class="form-group">
                  <div class="error"></div>
                </div>
              <div class="form-group" style="padding:20px; background-color:#f5f5f5; border:1px solid #ececec;">
                <label for="exampleInputPassword1">Acepta los terminos y condiciones</label>
                <input type="checkbox" class="form-check-input" style="margin: 0px 25px 0px 7px;">
                <div class="pull-right" style="margin-top:-10px; margin-bottom:15px;">
                <button type="button" class="btn-crovan registrar">REGISTRATE</button>
                </div>
              </div>
              
              
            </form>
        </div>
        <div class="col-xs-3">
            
        </div>
    </div>


    <div class="row">
        <div class="col-xs-12 ">
            <p class="text-center text-muted">Crovan Kegs | (+ 54 9) 11 7017 3422 | info@crovankegs.com</p>
        </div>
    </div>
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/jquery.easing.min.js"></script>
    <script src="../assets/js/scrolling-nav.js"></script>
    <script src="../assets/js/wow.js"></script>
    <script>
     new WOW().init();

     function scaleHeader() {
          var scalable = document.querySelectorAll('.scale--js');
          var margin = 10;
          for (var i = 0; i < scalable.length; i++) {
            var scalableContainer = scalable[i].parentNode;
            scalable[i].style.transform = 'scale(1)';
            var scalableContainerWidth = scalableContainer.offsetWidth - margin;
            var scalableWidth = scalable[i].offsetWidth;
            scalable[i].style.transform = 'scale(' + scalableContainerWidth / scalableWidth + ')';
            scalableContainer.style.height = scalable[i].getBoundingClientRect().height + 'px';
          }
        } 


        // Debounce by David Walsch
        // https://davidwalsh.name/javascript-debounce-function

        function debounce(func, wait, immediate) {
            var timeout;
            return function() {
                var context = this, args = arguments;
                var later = function() {
                    timeout = null;
                    if (!immediate) func.apply(context, args);
                };
                var callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) func.apply(context, args);
            };
        };

        var myScaleFunction = debounce(function() {
            scaleHeader();
        }, 250);

        myScaleFunction();

        window.addEventListener('resize', myScaleFunction);
    </script>   

    <script type="text/javascript">
        $(document).ready(function(){
          function registrar(email, password, nombre, apellido, password2, telefono) {
            $.ajax({
                data:  {email: email, 
                        password: password, 
                        nombre: nombre, 
                        apellido: apellido, 
                        password2: password2, 
                        telefono: telefono, 
                        accion: 'registrarUsuario'},
                url:   '../sistema/ajax/ajax.php',
                type:  'post',
                beforeSend: function () {

                },
                success:  function (response) {
                    if (response == '') {
                        $('.error').html('Se cargo correctamente el usuario, le enviamos un email a su correo para que active la cuenta. Tenga en cuenta que tiene 2 días para activar la cuenta sino debera volver a solictar una activación. Revise si casilla de correo no deseado en caso de no encontrar el email de Crovan Kegs. Muchas Gracias y que tenga un buen día.');
                        $('.error').removeClass('alert alert-danger');
                        $('.error').addClass('alert alert-success');
                        
                    } else {
                        $('.error').html(response);    
                        $('.error').removeClass('alert alert-success');
                        $('.error').addClass('alert alert-danger');
                    }
                    

                }
            });


          }
        
            
        $("#txtEmail").click(function(event) {
            $("#txtEmail").removeClass("alert alert-danger");
            $("#txtEmail").attr('placeholder','Ingrese el email');
        });

        $("#txtEmail").change(function(event) {
         $("#txtEmail").removeClass("alert alert-danger");
         $("#txtEmail").attr('placeholder','Ingrese el email');
        });
            
            
        $("#txtApellido").click(function(event) {
            $("#txtApellido").removeClass("alert alert-danger");
            $("#txtApellido").attr('placeholder','Ingrese el Apellido');
        });

        $("#txtApellido").change(function(event) {
            $("#txtApellido").removeClass("alert alert-danger");
            $("#txtApellido").attr('placeholder','Ingrese el Apellido');
        });
            
        
        $("#txtNombre").click(function(event) {
            $("#txtNombre").removeClass("alert alert-danger");
            $("#txtNombre").attr('placeholder','Ingrese el Nombre');
        });

        $("#txtNombre").change(function(event) {
            $("#txtNombre").removeClass("alert alert-danger");
            $("#txtNombre").attr('placeholder','Ingrese el Nombre');
        });
            
        $("#txtPassword").click(function(event) {
            $("#txtPassword").removeClass("alert alert-danger");
            $("#txtPassword").attr('placeholder','Ingrese el Contraseña');
            $('#errorP').html('');
        });

        $("#txtPassword").change(function(event) {
            $("#txtPassword").removeClass("alert alert-danger");
            $("#txtPassword").attr('placeholder','Ingrese la Contraseña');
            $('#errorP').html('');
        });
            
            
        $("#txtPassword2").click(function(event) {
            $("#txtPassword2").removeClass("alert alert-danger");
            $("#txtPassword2").attr('placeholder','Ingrese el Contraseña de Nuevo');
            $('#errorP2').html('');
        });

        $("#txtPassword2").change(function(event) {
            $("#txtPassword2").removeClass("alert alert-danger");
            $("#txtPassword2").attr('placeholder','Ingrese la Contraseña de Nuevo');
            $('#errorP2').html('');
        });
            
            
        function validar() {
            var $error = '';
            
            if ($('#txtPassword').val() == "") {
                $error = "Es obligatorio el campo Contraseña.";
                $('#errorP').html($error);
            }
            
            if ($('#txtPassword2').val() == "") {
                $error = "Es obligatorio el campo Contraseña de Nuevo.";
                $('#errorP2').html($error);
            }
            
            if ($('#txtPassword2').val() != $('#txtPassword').val()) {
                $error = "Las contraseñas son diferentes.";
                $('#txtPassword2').addClass("alert alert-danger");
                $('#txtPassword2').attr('placeholder',$error);
            }
            
            if ($('#txtNombre').val() == "") {
                $error = "Es obligatorio el campo Nombre.";
                $('#txtNombre').addClass("alert alert-danger");
                $('#txtNombre').attr('placeholder',$error);
            }
            
            
            if ($('#txtApellido').val() == "") {
                $error = "Es obligatorio el campo Apellido.";
                $('#txtApellido').addClass("alert alert-danger");
                $('#txtApellido').attr('placeholder',$error);
                
            }
            
            
            if ($('#txtEmail').val() == "") {
                $error = "Es obligatorio el campo Email.";
                $('#txtEmail').addClass("alert alert-danger");
                $('#txtEmail').attr('placeholder',$error);
                
            }
            
            var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            
            if( !emailReg.test( $('#txtEmail').val() ) ) {
                $error = "El E-Mail ingresado es inválido.";
                $('#txtEmail').addClass("alert alert-danger");
                $('#txtEmail').attr('placeholder',$error);
                
                
            }
            
            return $error;
        }

        $('.registrar').click(function(){
           if (validar() == '') {
               registrar($('#txtEmail').val(),$('#txtPassword').val(),$('#txtNombre').val(),$('#txtApellido').val(),$('#txtPassword2').val(),$('#txtTelefono').val());
               
               $('#camposForm').hide();
               $(this).hide();
           }
               
        });
    });
    </script>      
</body>

</html>